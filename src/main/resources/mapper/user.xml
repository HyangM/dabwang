<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ksh.dabang.repository.UserRepository">
	
	<select resultType="com.ksh.dabang.model.user.User" id="findAll">
		SELECT * FROM user 
	</select>
	
	
	<!-- 회원가입 -->
	<insert id="join">
		insert into user(email,name, password, phone, type,createDate)values(#{email},#{name},#{password},#{phone},#{type},now());
	</insert>
	
	
	
	<!-- 회원가입 시 이메일 중복체크 -->
	<select resultType="int" id="emailCheck">
		select count(*) from user where email = #{email} 
	</select>
	
	
	
	<!-- 로그인 시 아이디와 패스워드 일치여부 알아내서 principal에 넣음 -->
	<select resultType="com.ksh.dabang.model.user.User" id="findByUsernameAndPassword">
		select userId,email,name,phone,type,typeCer,typeName,typeNum,typeImage,role,profile from user where email = #{email} and password = #{password}
	</select>
	
	
	
	<!-- 회원 수정(비밀번호, 프로필사진)-->
	<update id="updateUser" >
		UPDATE user SET password = #{password} profile = #{password} WHERE userId = #{userId}
	</update>

	
	
	<!--  -->
	<update id="typeSave">
		UPDATE user SET typeName=#{typeName}, typeNum = #{typeNum}, typeImage = #{typeImage} WHERE userId = #{userId} 
	</update>

	
</mapper>