<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ksh.dabang.repository.RoomRepository">

	<select id="findAll" resultType="com.ksh.dabang.model.room.Room">
		select * from room
	</select>
	
	<select id="findByroomId" resultType="com.ksh.dabang.model.room.Room">
		select * from room where roomId = #{roomId}	
	</select>
	
	<select id="findAllpics" resultType="com.ksh.dabang.model.room.Room_pic">
		select * from room_pic where roomId = #{roomId}
	</select>
	
	
	
	<select id="findAlloption" resultType="com.ksh.dabang.model.room.Options">
		select op.optionId, op.optionName
		from room_option rop inner join options op 
		on rop.optionId = op.optionId 
		where roomId = #{roomId}
	</select>
	
	<select id="findBySearchList" resultType="com.ksh.dabang.model.room.dto.RespSearchListDto">
		select room.roomId, roomType, addr, detailAddr, dealType, yearRent, deposit, monthRent, dealRent,
			   areaP, areaM, floor, moveDay,mCost, parking, elevator, lof, title, content, room.createDate, 
			   hostId, agentId, lat, lng, picName
	      from room inner join room_pic
	      					on room_pic.roomId = room.roomId
	      				   and room_pic.picId = 1 
	</select>
	
	<select id="findByKeywordSearchList" resultType="com.ksh.dabang.model.room.dto.RespSearchListDto">
		select room.roomId, roomType, addr, detailAddr, dealType, yearRent, deposit, monthRent, dealRent,
			   areaP, areaM, floor, moveDay,mCost, parking, elevator, lof, title, content, room.createDate, 
			   hostId, agentId, lat, lng, picName
	      from room inner join room_pic
	      					on room_pic.roomId = room.roomId
	      				   and room_pic.picId = 1 
	      				   
	     where room.addr like CONCAT('%',#{keyword},'%')	      				
	</select>
	
		
</mapper>
